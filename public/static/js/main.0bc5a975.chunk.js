(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(14),a=n.n(s),i=(n(21),n(4)),o=(n(22),n(6)),j=n(7),u=n(8),l=n(0);var b=function(e){var t=e.setCurrentUser,n=Object(r.useState)({username:"",password:""}),c=Object(i.a)(n,2),s=c[0],a=c[1];function o(e){a(Object(u.a)(Object(u.a)({},s),{},Object(j.a)({},e.target.name,e.target.value)))}return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};fetch("/login",n).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),a({username:"",password:""})):e.json().then((function(e){return console.log(e.error)}))}))},className:"userform",children:[Object(l.jsx)("label",{children:"Username"}),Object(l.jsx)("input",{onChange:o,value:s.username,type:"text",name:"username"}),Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{onChange:o,value:s.password,type:"password",name:"password"}),Object(l.jsx)("input",{type:"submit"})]})};var d=function(e){var t=e.setCurrentUser,n=Object(r.useState)({username:"",email:"",password:"",password_confirmation:""}),c=Object(i.a)(n,2),s=c[0],a=c[1];function o(e){a(Object(u.a)(Object(u.a)({},s),{},Object(j.a)({},e.target.name,e.target.value)))}return Object(l.jsxs)("form",{className:"userform",onSubmit:function(e){e.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};fetch("/signup",n).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),a({username:"",email:"",password:"",password_confirmation:""})):e.json().then((function(e){return console.log(e.errors)}))}))},children:[Object(l.jsx)("label",{children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",value:s.username,onChange:o}),Object(l.jsx)("label",{children:"Email"}),Object(l.jsx)("input",{type:"email",name:"email",value:s.email,onChange:o}),Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",value:s.password,onChange:o}),Object(l.jsx)("label",{children:"Password confirmation"}),Object(l.jsx)("input",{type:"password",name:"password_confirmation",value:s.password_confirmation,onChange:o}),Object(l.jsx)("input",{type:"submit"})]})};var h=function(e){var t=e.setCurrentUser,n=(e.currentUser,Object(r.useState)(!1)),c=Object(i.a)(n,2),s=c[0],a=c[1];return console.log(s),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:s?Object(l.jsx)(d,{setCurrentUser:t}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{setCurrentUser:t}),Object(l.jsx)("p",{onClick:function(){return a(!0)},children:"sign up"})]})}),Object(l.jsx)("div",{})]})};var O=function(e){var t=e.currentUser,n=e.setCurrentUser,r=e.rivalries.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/rivalries/".concat(e.name),children:e.name})},e.id)}));return Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{className:"menu",children:[Object(l.jsx)("li",{className:"logo",children:Object(l.jsx)(o.b,{to:"/about",children:"Spartan Rivalries"})}),Object(l.jsxs)("li",{className:"item has-subitem",children:[Object(l.jsx)("a",{tabIndex:"0",children:"Rivalries"}),Object(l.jsx)("ul",{children:r})]}),Object(l.jsx)("li",{className:"item",children:Object(l.jsx)(o.b,{to:"/favorites",children:"My Favorites"})}),Object(l.jsxs)("li",{className:"item has-subitem",children:[Object(l.jsx)("a",{tabIndex:"0",children:t.username}),Object(l.jsxs)("ul",{className:"submenu",children:[Object(l.jsx)("li",{className:"subitem",children:Object(l.jsx)(o.b,{to:"/".concat(t.username),children:"My Account"})}),Object(l.jsx)("li",{className:"subitem",children:Object(l.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}),n(null)},children:"Logout"})})]})]})]})})},m=n(2);var x=function(){return Object(l.jsx)("h3",{children:"About component"})};var f=function(e){var t=e.rivalry,n=Object(r.useState)([]),c=Object(i.a)(n,2),s=c[0],a=c[1];Object(r.useEffect)((function(){console.log("fetching... add loading here"),fetch("/rivalries/".concat(t.id)).then((function(e){e.ok?e.json().then((function(e){return a(e.games.reverse())})):e.json().then((function(e){return console.log(e)}))}))}),[t]),console.log(s);var o=s.map((function(e){return Object(l.jsxs)("li",{children:[e.date," - ",e.winning_team," - ",e.score]},e.id)}));return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["I am the ",t.name," Container..."]}),Object(l.jsx)("div",{children:o})]})};var v=function(){return Object(l.jsx)("h1",{children:"Favorites Container..."})};var p=function(){return Object(l.jsx)("h1",{children:"My Account..."})};var g=function(e){var t=e.currentUser,n=e.rivalries.map((function(e){return Object(l.jsx)(m.a,{path:"/rivalries/".concat(e.name),children:Object(l.jsx)(f,{rivalry:e})},e.id)}));return Object(l.jsxs)(m.c,{children:[Object(l.jsx)(m.a,{path:"/about",children:Object(l.jsx)(x,{})}),n,Object(l.jsx)(m.a,{path:"/favorites",children:Object(l.jsx)(v,{})}),Object(l.jsx)(m.a,{path:"/".concat(t.username),children:Object(l.jsx)(p,{})})]})};var C=function(e){var t=e.currentUser,n=e.setCurrentUser,c=Object(r.useState)([]),s=Object(i.a)(c,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){fetch("/rivalries").then((function(e){e.ok?e.json().then((function(e){return o(e)})):e.json().then((function(e){return console.log(e)}))}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:Object(l.jsx)(O,{currentUser:t,setCurrentUser:n,rivalries:a})}),Object(l.jsx)("div",{children:Object(l.jsx)(g,{currentUser:t,rivalries:a})})]})};var w=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),a=Object(i.a)(s,2),j=a[0],u=a[1];return Object(r.useEffect)((function(){fetch("/me").then((function(e){e.ok?e.json().then((function(e){c(e),u(!0)})):u(!0)}))}),[]),j?Object(l.jsx)(o.a,{children:n?Object(l.jsx)(C,{currentUser:n,setCurrentUser:c}):Object(l.jsx)(h,{setCurrentUser:c})}):Object(l.jsx)("div",{})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.0bc5a975.chunk.js.map